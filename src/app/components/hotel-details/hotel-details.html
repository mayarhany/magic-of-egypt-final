<div *ngIf="hotel" class="container py-5 hotel-details" id="hotel-details">

  <!-- ! Hotel Header -->
  <div class="row align-items-center mb-5">

    <!-- ^ Hotel Information -->
    <div class="col-lg-6 col-md-12 mb-4 mb-lg-0">
      <h1 class="fw-bold primary-color">{{ hotel.name }}</h1>
      <p class="mb-1 fw-bold h3 text-primary-color">{{ hotel.city }}</p>
      <div class="text-muted small mb-2">
        <span class="text-warning mb-3">
          <!-- stars -->
          <ng-container *ngFor="let star of getStars(hotel.rating); let i = index">
            <i class="fa-solid fa-star" [ngClass]="{ 'text-secondary opacity-25': star === 'empty' }"></i>
          </ng-container>
        </span>
        ({{ hotel.rating }}/5)
      </div>
      <p class="text-muted fw-semibold fs-4">
        Starting from <span class="fw-bold text-dark">${{ hotel.price }}/night</span>
      </p>
      <p class="mt-2">{{ hotel.description }}</p>

      <button
        class="btn btn-sm fw-semibold rounded-pill shadow main-btn"
        routerLink="/hotels">
        Back to Hotels
      </button>
    </div>

    
    <div class="col-lg-6 col-md-12 text-center">
      <img
        [src]="hotel.image"
        alt="{{ hotel.name }}"
        class="img-fluid rounded-4 shadow"/>
    </div>
  </div>

  <!-- ^ Rooms Details Section  -->
  <div class="mt-5">
    <h3 class="fw-bold mb-4 text-center text-primary-color">Available Rooms</h3>

    <!-- * Navigation -->
    <ul class="nav nav-tabs justify-content-center mb-4" id="roomTabs" role="tablist">
      <li class="nav-item" *ngFor="let room of hotel.rooms; let i = index">
        <button
          class="nav-link fw-semibold"
          [class.active]="i === 0"
          data-bs-toggle="tab"
          [attr.data-bs-target]="'#room' + i"
          type="button"
          role="tab">
          {{ room.type }}
        </button>
      </li>
    </ul>

    <!-- * Content -->
    <div class="tab-content">
      <div
        class="tab-pane fade"
        *ngFor="let room of hotel.rooms; let i = index"
        [class.show]="i === 0"
        [class.active]="i === 0"
        [id]="'room' + i"
        role="tabpanel">
        <div
          class="card border-0 shadow-sm p-4 rounded-4 mx-auto mb-4"
          style="max-width: 700px;"
        >
          <h5 class="fw-bold primary-color">{{ room.type }}</h5>
          <p class="fs-5 fw-semibold mb-2 text-primary-color">
            ${{ room.price }} / night
          </p>
          <p class="text-muted mb-3">{{ room.includes }}</p>

          <div class="d-flex justify-content-center">
            <button
              class="btn btn-sm fw-semibold rounded-pill shadow main-btn"
              data-bs-toggle="modal"
              data-bs-target="#bookingModal"
              (click)="selectRoom(room)"
            >
              Book This Room
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ! Booking Modal -->
<div
  class="modal fade"
  id="bookingModal"
  tabindex="-1"
  aria-labelledby="bookingModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 rounded-4 shadow-lg">
      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold" id="bookingModalLabel">Book Your Stay</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <div class="modal-body">
        <div *ngIf="selectedRoom">
          <h5 class="fw-semibold primary-color">{{ selectedRoom.type }}</h5>
          <p class="fs-5 text-primary-color mb-1">${{ selectedRoom.price }} / night</p>
          <p class="text-muted">{{ selectedRoom.includes }}</p>

          <hr />

          <div class="mb-3">
            <label class="form-label fw-semibold">Check-in Date</label>
            <input type="date" class="form-control" />
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Check-out Date</label>
            <input type="date" class="form-control" />
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Guests</label>
            <input type="number" class="form-control" min="1" max="10" value="1" />
          </div>
        </div>
      </div>

      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn btn-outline-secondary rounded-pill px-4"
          data-bs-dismiss="modal"
        >
          Cancel
        </button>
        <button
          type="button"
          class="btn btn-primary rounded-pill px-4"
          (click)="confirmBooking()"
        >
          Confirm Booking
        </button>
      </div>
    </div>
  </div>
</div>

<!-- ! Success Popup Modal -->
<div
  class="modal fade"
  id="successModal"
  tabindex="-1"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center border-0 rounded-4 shadow-lg p-4">
      <div class="text-success display-4 mb-3">âœ“</div>
      <h4 class="fw-bold mb-2">Booking Confirmed!</h4>
      <p class="text-muted mb-4">
        Your stay at <strong>{{ hotel?.name }}</strong> has been booked successfully.
      </p>
      <button
        type="button"
        class="btn btn-success rounded-pill px-4"
        data-bs-dismiss="modal"
      >
        Done
      </button>
    </div>
  </div>
</div>

